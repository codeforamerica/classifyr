<div class="w-full">
  <%= render 'shared/classifications/header' %>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8">
    <div class="mt-12 px-4 py-5 sm:px-6">
      <div class="text-sm font-bold text-gray-500 pb-4"><%= @data_set.title %></div>
      <div class="text-3xl font-bold text-black pb-4"><%= @term.value %></div>
      <div class="text-black pb-8">
        Please review the sample call records for this call type. From there, please classify the call type to the best of your ability by searching below for different common incident types. After you've selected an incident type, you can choose how confident you are about your selection. If you are unable to identify a common incident type to map to this call type, you can choose to skip this call type classification.
      </div>
      <section id="call-types-examples" class="bg-white mb-16">
        <div class="text-lg font-bold text-black px-6 py-6 border-b-2 border-gray-200">
          Example Call Type Records
        </div>
        <section class="px-6 pb-6 bg-white">
          <div class="overflow-x-auto">
            <table class="border-collapse">
              <thead>
                <tr>
                  <% @fields.each do |field| %>
                    <th scope="col">
                      <%= field.heading&.humanize %>
                    </th>
                  <% end %>
                </tr>
              </thead>
              <tbody>
                <% @data.each do |rows| %>
                  <tr class="row">
                    <% rows.each do |column| %>
                      <td>
                        <%= column %>
                      </td>
                    <% end %>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </section>
      </section>
      <section id="classify-call-type">
        <div class="text-3xl font-bold text-black pb-4">Classify Call Type</div>
        <div class="text-black pb-8">
          Assign a common incident type to this data set.
        </div>
        <div class="mb-10">
          <div class="relative text-gray-400 focus-within:text-gray-400">
            <%= form_with(url: search_common_incident_types_path, class: "filters-container", method: :get, data: { controller: "filters", filters_target: "form", turbo_frame: "results" }) do |f| %>
              <span class="absolute inset-y-0 left-0 flex items-center pl-2">
                <button type="submit" class="py-1 pl-2 pr-3 focus:outline-none border-transparent focus:border-transparent focus:ring-0">
                  <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" class="w-6 h-6"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </button>
              </span>
              <%= f.text_field :q, {
                placeholder: "Type to search...",
                autocomplete: "off",
                class: "border-0 w-full text-sm bg-white pl-12 py-4 focus:shadow focus:outline-none focus:bg-white border-transparent focus:border-transparent focus:ring-0 focus:text-gray-900 rounded-3xl",
                data: { action: "filters#submit" }
              } %>
            <% end %>
          </div>
        </div>
      </section>
      <%= turbo_frame_tag "results" do %>
        <%= render 'shared/classifications/common_incident_type_results', common_incident_types: @common_incident_types %>
      <% end %>
    </div>
  </div>
